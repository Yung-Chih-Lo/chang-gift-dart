沒問題，這是根據我們討論的邏輯，您需要的 Next.js API Endpoints 規劃與功能說明：

### 1. 登記階段

**`POST /api/register`**

* **功能：** 讓參與者輸入序號並登記帶來的禮物。
* **輸入參數：** `code` (序號), `giftName` (禮物名稱)
* **後端邏輯：**
    1.  檢查 `code` 是否存在於資料庫且尚未被使用。
    2.  若有效，將該序號標記為「已登記」，並將 `giftName` 存入資料庫。
    3.  若無效或已登記，回傳錯誤。

---

### 2. 遊戲階段 (揭露)

**`POST /api/reveal`**

* **功能：** 讓參與者隨機抽取一個**別人**帶來的禮物名稱（真心話大冒險前的揭露環節）。
* **輸入參數：** `myCode` (當前操作者的序號)
* **後端邏輯：**
    1.  讀取資料庫中所有已登記的禮物清單。
    2.  **排除** `myCode` 自己帶來的禮物。
    3.  從剩餘清單中**隨機選取**一個禮物名稱並回傳。

---

### 3. 投票階段

**`GET /api/gifts`** (選用，視前端實作而定)

* **功能：** 取得所有已登記的禮物清單（用於製作投票頁面的下拉選單或選項列表）。
* **輸入參數：** 無
* **後端邏輯：** 回傳所有參與者登記的 `giftName` 列表。

**`POST /api/vote`**

* **功能：** 讓參與者投出「最爛禮物」的一票。
* **輸入參數：** `voterCode` (投票者的序號), `targetGiftName` (被投的禮物名稱)
* **後端邏輯：**
    1.  檢查 `voterCode` 是否有效。
    2.  檢查該 `voterCode` 是否已經投過票（防止重複灌票）。
    3.  若未投過，寫入一筆投票紀錄。

**`GET /api/results`**

* **功能：** 顯示最終的投票排行榜。
* **輸入參數：** 無
* **後端邏輯：**
    1.  統計所有投票紀錄。
    2.  計算每個 `giftName` 的得票數。
    3.  回傳由高到低排序的結果清單。